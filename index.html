<!DOCTYPE html>
<html>
<head>
    <title>A-Frame Avatar AR/VR - Enhanced</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        a-scene {
            height: 100vh;
            width: 100vw;
        }
    </style>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.0/dist/aframe-extras.min.js"></script>
</head>
<body>
    <a-scene 
        xr-mode-ui="XRMode: xr;" 
        background="color: #87CEEB"
        fog="type: linear; color: #87CEEB; near: 10; far: 15"
        loading-screen="dotsColor: white; backgroundColor: #1a1a1a">
        
        <!-- ASSETS OPTIMIZADOS -->
        <a-assets timeout="5000" preload="true">
            <a-asset-item id="avatarModel" src="https://cdn.jsdelivr.net/gh/Josema35RJ/Avatar@main/3dpea.com_Salute.glb"></a-asset-item>
        </a-assets>
        
        <!-- AVATAR ANIMADO MEJORADO -->
        <a-entity 
            id="avatar"
            gltf-model="#avatarModel"
            position="0 0 -2.5"
            scale="0.8 0.8 0.8"
            look-at="[camera]"
            animation-mixer="clip: *; loop: repeat; timeScale: 1"
            shadow="cast: true; receive: true"
            
            <!-- ANIMACIÓN DE FLOTACIÓN SUAVE -->
            animation="property: position; to: 0 0.1 -2.5; dir: alternate; dur: 3000; easing: easeInOutSine; loop: true"
            
            <!-- ANIMACIÓN DE GIRO SUTIL -->
            animation__rotate="property: rotation; to: 0 5 0; dir: alternate; dur: 8000; easing: easeInOutQuad; loop: true"
            
            <!-- ANIMACIÓN DE ESCALA RESPIRACIÓN -->
            animation__scale="property: scale; to: 0.85 0.85 0.85; dir: alternate; dur: 4000; easing: easeInOutSine; loop: true">
            
            <!-- DETECTORES DE COLISIÓN -->
            <a-sphere 
                radius="0.4" 
                material="visible: false" 
                dynamic-body 
                collision-filter="group: avatar; mask: environment">
            </a-sphere>
        </a-entity>
        
        <!-- ENTORNO INTERACTIVO -->
        <a-plane 
            position="0 0 -3" 
            rotation="-90 0 0" 
            width="10" 
            height="10"
            material="color: #90EE90; opacity: 0.8; metalness: 0.2; roughness: 0.7"
            static-body 
            shadow="receive: true"></a-plane>
        
        <!-- PISO CON TEXTURA -->
        <a-plane 
            position="0 0 -3.5" 
            rotation="-90 0 0" 
            width="20" 
            height="20"
            material="color: #228B22; repeat: 10 10"
            static-body 
            shadow="receive: true"></a-plane>
        
        <!-- CÁMARA MEJORADA -->
        <a-camera 
            position="0 1.6 0"
            wasd-controls="acceleration: 50"
            look-controls
            cursor="rayOrigin: mouse; fuse: false"
            raycaster="objects: .clickable">
        </a-camera>
        
        <!-- SISTEMA DE ILUMINACIÓN PROFESIONAL -->
        <a-light 
            type="ambient" 
            color="#4A90E2" 
            intensity="0.6"
            light="castShadow: false"></a-light>
            
        <a-light 
            type="directional" 
            color="#FFFFFF" 
            intensity="1.2"
            position="2 4 1"
            cast-shadow="true"
            shadow="camera-near: 0.5; camera-far: 50; map-size-width: 2048; map-size-height: 2048"></a-light>
            
        <a-light 
            type="directional" 
            color="#FFD700" 
            intensity="0.4"
            position="-2 3 -1"></a-light>
            
        <!-- PARTÍCULAS AMBIENTALES -->
        <a-entity 
            particle-system="color: #FFFFFF,#87CEEB; velocityValue: 0 -1 0; velocitySpread: 1 0 1; accelerationValue: 0 -0.5 0; particleCount: 200; startSize: 0.02; endSize: 0.01; duration: 5; loop: true">
        </a-entity>
        
        <!-- HANDLES VR MEJORADOS -->
        <a-entity 
            hand-controls="hand: left; model: true; color: #4A90E2"></a-entity>
        <a-entity 
            hand-controls="hand: right; model: true; color: #4A90E2"></a-entity>
        
    </a-scene>
</body>
</html>
