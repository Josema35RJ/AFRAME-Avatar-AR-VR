<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Model Viewer AR - VR</title>
    <meta name="description" content="Model Viewer (VR / AR) â€¢ A-Frame">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- A-Frame base -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>

    <!-- Extensiones oficiales -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

    <!-- AR.js (para fallback sin WebXR) -->
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin:0; overflow:hidden; background:#000;">

    <!-- ===================================================== -->
    <!-- ðŸŸ¢ ESCENA PRINCIPAL (VR / AR NATIVO WebXR) -->
    <!-- ===================================================== -->
    <a-scene
      renderer="antialias: true; colorManagement: true;"
      xr-mode-ui="enabled: true"
      background="color: #ECECEC"
      embedded
      vr-mode-ui="enabled: true">

      <!-- Assets -->
      <a-assets timeout="10000">
        <a-asset-item id="avatarModel" src="https://cdn.jsdelivr.net/gh/Josema35RJ/Avatar@main/3dpea.com_Salute.glb"></a-asset-item>
        <img id="shadow" src="shadow.png">
      </a-assets>

      <!-- Luces -->
      <a-entity light="type: ambient; intensity: 0.7"></a-entity>
      <a-entity light="type: directional; intensity: 1; position: 0 2 1"></a-entity>

      <!-- CÃ¡mara + cursor VR -->
      <a-entity id="cameraRig" position="0 1.6 3">
        <a-camera look-controls wasd-controls>
          <a-cursor 
            fuse="true" 
            fuse-timeout="1000"
            material="color: white; shader: flat">
          </a-cursor>
        </a-camera>
      </a-entity>

      <!-- Suelo -->
      <a-plane rotation="-90 0 0" width="10" height="10" color="#999" shadow="receive: true"></a-plane>

      <!-- Avatar -->
      <a-entity
        gltf-model="#avatarModel"
        position="0 0 -2"
        scale="1 1 1"
        rotation="0 180 0"
        look-at="[camera]"
        animation-mixer
        shadow="cast: true; receive: false">
      </a-entity>

    </a-scene>

    <!-- ===================================================== -->
    <!-- ðŸŸ¡ ESCENA ALTERNATIVA (AR.js - sin WebXR) -->
    <!-- ===================================================== -->
    <a-scene
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      vr-mode-ui="enabled: false"
      renderer="antialias: true; alpha: true; logarithmicDepthBuffer: true;"
      device-orientation-permission-ui="enabled: true">

      <!-- Marcador AR.js -->
      <a-marker preset="hiro">
        <a-entity
          gltf-model="#avatarModel"
          position="0 0 0"
          rotation="0 180 0"
          scale="0.5 0.5 0.5"
          look-at="[camera]"
          animation-mixer>
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

  </body>
</html>
